### 传输层：TCP、UDP
1. 绝大多数网络应用使用TCP或UDP，而这两者又使用网络层协议：IPv4或IPv6，也可以绕过传输层直接使用IPv4或IPv6，但这种技术（往往被称为原始套接字）却极少使用
2. Linux使用一种称为`SOCK_PACKET`的特殊套接字类型提供对于数据链路的访问
3. TCP和UDP都是既可以使用IPv4，也可以使用IPv6
4. UDP缺乏可靠性，不保证UDP数据报会到达其最终目的地，不保证各个数据报的先后顺序跨网络后保持不变，也不保证每个数据报只到达一次
5. 如果一个UDP数据报到达了其最终目的地，但是校验和检测发现有错误或者该数据报在网络传输途中被丢弃了，它就无法被投递给UDP套接字，也不会被源端自动重传
6. 每个UDP数据报都有一个长度，如果数据报正确到达其目的地，那么该数据报的长度将随数据一道传递给接收端应用进程，因此我们就能知道数据报的边界
7. 由于UDP是无连接的，因此一个UDP客户端可以使用同一个套接字发送不同的数据报给不同的服务器，服务器也可以用同一个UDP套接字从若干不同的客户端接收数据报
8. TCP是面向连接的，通过确认应答、超时重传以及序列号等保证其可靠性，并且TCP含有用于动态估计客户和服务器之间的往返时间（round-trip time,RTT）的算法，TCP还提供流量控制，同时TCP连接是全双工的，UDP也可以是全双工的
9. 常用TCP选项：  
（1）MSS选项：MSS代表最大分节大小，也就是本次连接中每个TCP分节中愿意接受的最大数据量，发送端TCP使用接收端的MSS值作为所发送分节的最大大小  
（2）窗口规模选项，TCP连接任何一端能够通告对端的最大窗口大小为65535，因为在TCP首部中相应的字段占16位，不过为了更大的窗口大小，TCP中有新选项代表窗口扩大（左移）的位数  
（3）时间戳选项，这个选项对于高速网络连接是必要的，它可以防止由失而复现的分组可能造成的数据损坏
10. 在TCP连接断开时，服务器发送FIN的ACK之后和服务器主动发送FIN之间，从被动关闭到主动关闭一端的数据流动是可能的，这称为半关闭
11. 执行主动关闭的端在最后关闭前会经历TIME_WAIT状态，该端点停留在这个状态的持续时间最长是最长分节生命期（maximum segment lifetime，MSL）的两倍，MSL是任何IP数据报能够在因特网中存活的最长时间。
12. TIME_WAIT状态有两个存在的理由：  
（1）可靠地实现TCP全双工连接的终止，假设最后的ACK丢失，那么被动关闭方需要主动关闭一方来重传这个ACK  
（2）允许老的重复分节在网络中消逝，因为如果没有这个TIME_WAIT时间，如果在连接断开后立马建立相同连接，那么之前在网络中还未消逝的分节就会被误认为是新的分节导致错误